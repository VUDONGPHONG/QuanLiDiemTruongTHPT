module.exports = require('./src/node');


const fs = require('fs');
const path = require('path');

// Thư mục chứa các file EJS
const ejsDir = './views';

fs.readdir(ejsDir, (err, files) => {
  if (err) throw err;

  files.forEach(file => {
    if (path.extname(file) === '.ejs') {
      const ejsFilePath = path.join(ejsDir, file);
      const htmlFilePath = path.join(ejsDir, file.replace('.ejs', '.html'));

      // Đọc nội dung file EJS
      fs.readFile(ejsFilePath, 'utf8', (err, data) => {
        if (err) throw err;

        // Thay thế nội dung động bằng giá trị tĩnh (nếu cần)
        const htmlContent = data
          .replace(/<%=.*?%>/g, '') // Xóa các biến
          .replace(/<%.*?%>/gs, ''); // Xóa các logic EJS

        // Ghi ra file HTML
        fs.writeFile(htmlFilePath, htmlContent, err => {
          if (err) throw err;
          console.log(`Converted: ${file} → ${file.replace('.ejs', '.html')}`);
        });
      });
    }
  });
});
